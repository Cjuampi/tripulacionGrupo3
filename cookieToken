import React, { useState } from "react";
import './App.css';
import axios from 'axios'
import { useCookies } from 'react-cookie';
/* import Map from './components/map/Map';
import "leaflet/dist/leaflet.css"; */
//import Signup from './components/signup/Signup'
/* import RegisterScreen from "./components/login/Login"; */
import uCookies from 'universal-cookie';



function App() {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [cookies, setCookie] = useCookies();
  const objCookies = new uCookies();

  const loginAxios = async () =>{
    let result = await axios.post('http://localhost:3000/logIn',{userEmail:email, userPassword:password})
    addCookie(result.data.token)
    console.log(result.data)
  }

  const singUpAxios = async() => {
    let result = await axios.post('http://localhost:3000/singUp',{userName: name, userEmail:email, userPassword:password})
    addCookie(result.data.token)
    console.log(result)
  }

  const getCookieToken = () =>{
    let token = objCookies.get('userToken')
    console.log('el token ',token)
  }

  const addCookie = (cookieToken) =>{
    setCookie('userToken', cookieToken, { path: '/' });
  }

  const handleSubmit = (e) =>{
    e.preventDefault();
    /* loginAxios() */
    singUpAxios();
  }

  const onChangeN = (e) =>{
    setName(e.target.value)
  }

  const onChangeE = (e) =>{
    setEmail(e.target.value)
  }

  const onChangeP = (e) =>{
    setPassword(e.target.value)
  }

  return (
    <div className="App">
      <form onSubmit={handleSubmit}>
        Nombre;
        <input type='text' id="userName" class="userName" onChange={onChangeN}/><br/>
        Email
        <input type='text' id="userEmail" class="userEmail" onChange={onChangeE}/><br/>
        Password
        <input type='text' id="userPassword" class="userPassword" onChange={onChangeP}/><br/>
        <input type="submit" />
        {getCookieToken()}
      </form>
{/*       <Map/>
      <RegisterScreen/> */}
    
    </div>
    
  );
}

export default App;

